<!DOCTYPE html><html><head>
    <meta charset="UTF-8"/>
    <title>Arrow</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Functional companion to Kotlin&#39;s Standard Library"/>
    <meta name="keywords" content="functional-programming, kotlin-library, monads, monad-transformers, functional-data-structure, kotlin, fp-types, adt, free-monads, tagless-final, mtl, for-comprehension, category-theory"/>

    <meta property="og:image" content="http://arrow-kt.io/img/poster.png"/>
    <meta property="og:title" content="Arrow"/>
    <meta property="og:site_name" content="Arrow"/>
    <meta property="og:url" content="http://arrow-kt.io/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:description" content="Functional companion to Kotlin&#39;s Standard Library"/>
    <meta property="og:keywords" content="functional-programming, kotlin-library, monads, monad-transformers, functional-data-structure, kotlin, fp-types, adt, free-monads, tagless-final, mtl, for-comprehension, category-theory"/>

    <meta name="twitter:text:description" content="Functional companion to Kotlin&#39;s Standard Library"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:site" content="@arrow_kt"/>
    <meta name="twitter:creator" content="@arrow_kt"/>
    <meta name="twitter:image" content="http://arrow-kt.io/img/twitter-card.png"/>

    <!-- Arrow versions metadata -->
    <meta name="previous-version" data-title="" data-url=""/>
    <meta name="stable-version" data-title="" data-url=""/>
    <meta name="next-version" data-title="" data-url=""/>

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet" type="text/css"/>
    <!-- Animated -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css"/>
    <!-- Arrow main css -->
    <link rel="shortcut icon" href="../../../../img/favicon.png"/>
    <!-- highlight  css -->
    <link rel="stylesheet" type="text/css" href="../../../../css/highlight/atom-one-light.css"/>
    <!-- Arrow main css -->
    <link rel="stylesheet" type="text/css" href="../../../../css/arrow.css"/>

    <!-- Code to manage version information -->
    <script src="../../../../js/docVersions.js" defer=""></script>

    <!-- Diagrams support -->
    <script src="../../../../js/dagre.min.js"></script>
    <script src="../../../../js/lodash.min.js"></script>
    <script src="../../../../js/nomnoml.js"></script>
    <script src="../../../../js/diagrams.js" async=""></script>

    
        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-18433785-18"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-18433785-18');
</script>

    
</head>

<body id="doc-body">
<div id="wrapper">
    <div id="sidebar-wrapper">
    <div class="sidebar-brand">
        <a class="brand" href="https://next.arrow-kt.io/">
            <img src="../../../../img/arrow-brand-sidebar.svg" alt=""/>
            <span>&Lambda;rrow</span>
        </a>
        <button type="button" id="main-toggle" class="sidebar-toggle">
            <span class="close"></span>
        </button>
    </div>

    <ul class="sidebar-nav sidebar-doc-versions">
  <li class="sidebar-nav-item">
    <a href="index.html#">
      <span>Arrow version</span>
      <span id="arrow-version"></span>
    </a>
    <ul>
      <li>
        <a href="https://arrow-kt.io/docs/">
          <span>
            v0.9.0 - STABLE
          </span>
        </a>
      </li>

      <li>
        <a href="../../../index.html">
            <span>
              v0.9.1 - NEXT
            </span>
        </a>
      </li>

      <li>
        <a href="https://0-8-2.arrow-kt.io/docs/">
            <span>
              v0.8.2 -
              PREVIOUS
            </span>
        </a>
      </li>

      
        
      
        
      
        
      
    </ul>
  </li>
</ul>


    <ul class="sidebar-nav">
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Quick Start</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../index.html">
                        <i class="fa fa-circle"></i>
                        <span>Index</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../quickstart/libraries/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Libraries</span>
                    </a>
                </li>
                
                <li>
                    <a href="https://next.arrow-kt.io/blog/">
                        <i class="fa fa-circle"></i>
                        <span>Blogs &amp; Presentations</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../quickstart/projects/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Projects &amp; Examples</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Arrow Fx</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../index.html">
                        <i class="fa fa-circle"></i>
                        <span>Getting Started</span>
                    </a>
                </li>
                
                <li>
                    <a href="../async/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Asynchronous &amp; Concurrent Programming</span>
                    </a>
                </li>
                
                <li>
                    <a href="index.html">
                        <i class="fa fa-circle"></i>
                        <span>Polymorphism. One Program multiple runtimes</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>API Docs</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../apidocs/arrow-typeclasses/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Type Classes</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-core-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Core Data Types</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-core-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Core Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-extras/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Core Extra Data Types</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-extras-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Core Extra Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-kotlinx-coroutines-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Coroutines</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-kotlinx-coroutines-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Coroutines Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-rx2-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Rx2</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-rx2-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Rx2 Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-reactor-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Reactor</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-reactor-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Reactor Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-streams/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Streams</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-mtl/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MTL</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-optics/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Optics</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-recursion-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Recursion</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-recursion-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Recursion Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-generic/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Generic</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-free-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Free</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-validation/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Validation</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Patterns</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../patterns/glossary/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Glossary</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../patterns/error_handling/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Error Handling</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../patterns/dependency_injection/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Dependency Injection</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../patterns/monads/index.html">
                        <i class="fa fa-circle"></i>
                        <span>The Monad Tutorial</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../patterns/monad_comprehensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Monad Comprehensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../patterns/polymorphic_programs/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Polymorphic Programs</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../patterns/free_algebras/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Free Algebras</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Data Types</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../datatypes/intro/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Intro</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../datatypes/basic/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Basic Types</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/core/option/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Option</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/core/either/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Either</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/core/try/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Try</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/validated/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Validated</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/nonemptylist/index.html">
                        <i class="fa fa-circle"></i>
                        <span>NonEmptyList</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/listk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>ListK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/sequencek/index.html">
                        <i class="fa fa-circle"></i>
                        <span>SequenceK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/setk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>SetK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/mapk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MapK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/sortedmapk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>SortedMapK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/ior/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Ior</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/core/id/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Id</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/reader/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Reader</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/kleisli/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Kleisli</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/state/index.html">
                        <i class="fa fa-circle"></i>
                        <span>State</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/statet/index.html">
                        <i class="fa fa-circle"></i>
                        <span>StateT</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/store/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Store</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/moore/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Moore</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/sum/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Sum</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/day/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Day</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/writert/index.html">
                        <i class="fa fa-circle"></i>
                        <span>WriterT</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/free/trampoline/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Trampoline</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/coproduct/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Coproduct</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/core/eval/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Eval</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/optiont/index.html">
                        <i class="fa fa-circle"></i>
                        <span>OptionT</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/eithert/index.html">
                        <i class="fa fa-circle"></i>
                        <span>EitherT</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/core/function0/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Function0</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/core/function1/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Function1</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/const/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Const</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Type Classes</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../typeclasses/intro/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Intro</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/show/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Show</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/eq/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Eq</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/hash/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Hash</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/order/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Order</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/semigroup/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Semigroup</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-typeclasses/arrow.typeclasses/-semigroupal/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Semigroupal</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-typeclasses/arrow.typeclasses/-monoidal/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Monoidal</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/monoid/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Monoid</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-typeclasses/arrow.typeclasses/-semiring/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Semiring</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/foldable/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Foldable</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/bifoldable/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Bifoldable</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/traverse/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Traverse</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/reducible/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Reducible</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/mtl/typeclasses/traversefilter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>TraverseFilter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/functor/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Functor</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/mtl/typeclasses/functorfilter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>FunctorFilter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/applicative/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Applicative</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/applicativeerror/index.html">
                        <i class="fa fa-circle"></i>
                        <span>ApplicativeError</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/selective/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Selective</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/monad/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Monad</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/monaderror/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadError</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/effects/typeclasses/bracket/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Bracket</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/mtl/typeclasses/monadfilter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadFilter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/mtl/typeclasses/monadreader/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadReader</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/mtl/typeclasses/monadwriter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadWriter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/mtl/typeclasses/monadstate/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadState</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/mtl/typeclasses/monadcombine/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadCombine</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/comonad/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Comonad</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/bimonad/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Bimonad</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/bifunctor/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Bifunctor</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/profunctor/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Profunctor</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/semigroupk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>SemigroupK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/monoidk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonoidK</span>
                    </a>
                </li>
                
                <li>
                    <a href="https://next.arrow-kt.io/docs/typeclasses/inject/">
                        <i class="fa fa-circle"></i>
                        <span>Inject</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/alternative/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Alternative</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/divide/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Divide</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/divisible/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Divisible</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/decidable/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Decidable</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Effects</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../io/index.html">
                        <i class="fa fa-circle"></i>
                        <span>IO</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../monaddefer/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadDefer</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../async/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Async</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../effect/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effect</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../promise/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Promise</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../ref/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Ref</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../fiber/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Fiber</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-data/arrow.effects/-resource/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Resource</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Optics</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../optics/dsl/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Optics DSL</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/iso/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Iso</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/lens/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Lens</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/optional/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Optional</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/prism/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Prism</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/getter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Getter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/setter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Setter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/fold/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Fold</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/traversal/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Traversal</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/cons/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Cons</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/snoc/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Snoc</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/at/index.html">
                        <i class="fa fa-circle"></i>
                        <span>At</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/index/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Index</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/filterindex/index.html">
                        <i class="fa fa-circle"></i>
                        <span>FilterIndex</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/each/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Each</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>&Lambda;rrow Query Language</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../aql/intro/index.html">
                        <i class="fa fa-circle"></i>
                        <span>&Lambda;rrow Query Language</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../aql/select/index.html">
                        <i class="fa fa-circle"></i>
                        <span>select</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../aql/from/index.html">
                        <i class="fa fa-circle"></i>
                        <span>from</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../aql/where/index.html">
                        <i class="fa fa-circle"></i>
                        <span>where</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../aql/groupby/index.html">
                        <i class="fa fa-circle"></i>
                        <span>groupBy</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../aql/orderby/index.html">
                        <i class="fa fa-circle"></i>
                        <span>orderBy</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../aql/sum/index.html">
                        <i class="fa fa-circle"></i>
                        <span>sum</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../aql/union/index.html">
                        <i class="fa fa-circle"></i>
                        <span>union</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../aql/custom/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Custom Data Types</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Generic</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../generic/coproduct/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Coproduct</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../generic/product/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Product</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Integrations</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../integrations/rx2/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Rx2</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../integrations/reactor/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Reactor</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../integrations/kotlinxcoroutines/index.html">
                        <i class="fa fa-circle"></i>
                        <span>kotlinx.coroutines</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../integrations/retrofit/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Retrofit</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../integrations/kindedj/index.html">
                        <i class="fa fa-circle"></i>
                        <span>KindedJ</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Free</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../free/free/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Free</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../free/freeapplicative/index.html">
                        <i class="fa fa-circle"></i>
                        <span>FreeApplicative</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../free/cofree/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Cofree</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../free/yoneda/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Yoneda</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../free/coyoneda/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Coyoneda</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Recursion Schemes</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../recursion/intro/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Intro</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../recursion/recursive/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Recursive</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../recursion/corecursive/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Corecursive</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../recursion/birecursive/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Birecursive</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../recursion/mu/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Mu</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../recursion/nu/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Nu</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../recursion/fix/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Fix</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Legal</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../legal/credits/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Credits</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../legal/licenses/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Licenses</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
    </ul>

</div>

    <div id="doc-wrapper">
    <div class="doc-header">
        <button type="button" id="main-toggle" class="sidebar-toggle">
            <i class="fa fa-lg fa-bars menu-icon"></i>
        </button>
        <div class="search-wrapper">
          <input id="docsearch" class="search" placeholder="Search documentation..." type="search"/>
        </div>
        <a target="_blank" href="https://github.com/arrow-kt/arrow/edit/master/modules/docs/arrow-docs/docs/docs/effects/fx/polymorphism/README.md">
          <i class="fa fa-pencil"></i>
            Edit
        </a>
    </div>
    <div class="doc-content">
        
        <h1 id="polymorphism-one-program-multiple-runtimes">Polymorphism. One Program multiple runtimes</h1>

<p>Fx programs can be declared in a polymorphic style and made concrete to your framework of choice at the edge of the world.</p>

<a class="dashingAutolink" name="autolink-78"></a><a class="dashAnchor" name="//apple_ref/cpp/Guide/Creating%20polymorphic%20programs"></a><h2 id="creating-polymorphic-programs">Creating polymorphic programs</h2>

<p>So far, the programs we&rsquo;ve created in previous examples were built with <code class="highlighter-rouge">Arrow</code>&rsquo;s <code class="highlighter-rouge">IO</code>, but Fx is not restricted to <code class="highlighter-rouge">IO</code>. Since <code class="highlighter-rouge">IO</code> provides extensions for <code class="highlighter-rouge">Concurrent&lt;F&gt;</code>, we can also create extensions for the <code class="highlighter-rouge">fx</code> DSL directly as in all previous examples.</p>

<p>We can also code against <code class="highlighter-rouge">Fx</code> assuming it would be provided at some point in the future.</p>

<p>In the following example, the program is declared polymorphic and then made concrete to Arrow IO at the edge.</p>

<div data-executable="true" class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">arrow.effects.IO</span>
<span class="k">import</span> <span class="nn">arrow.unsafe</span>
<span class="k">import</span> <span class="nn">arrow.Kind</span>
<span class="k">import</span> <span class="nn">arrow.effects.extensions.io.unsafeRun.runBlocking</span>
<span class="k">import</span> <span class="nn">arrow.effects.extensions.io.unsafeRun.unsafeRun</span>
<span class="k">import</span> <span class="nn">arrow.effects.extensions.io.fx.fx</span>
<span class="k">import</span> <span class="nn">arrow.effects.typeclasses.UnsafeRun</span>
<span class="k">import</span> <span class="nn">arrow.effects.typeclasses.suspended.concurrent.Fx</span>
<span class="c1">//sampleStart</span>
<span class="cm">/* a side effect */</span>
<span class="kd">val</span> <span class="py">const</span> <span class="p">=</span> <span class="m">1</span>
<span class="n">suspend</span> <span class="k">fun</span> <span class="nf">sideEffect</span><span class="p">():</span> <span class="nc">Int</span> <span class="p">{</span>
  <span class="n">println</span><span class="p">(</span><span class="n">Thread</span><span class="p">.</span><span class="n">currentThread</span><span class="p">().</span><span class="n">name</span><span class="p">)</span>
  <span class="k">return</span> <span class="k">const</span>
<span class="p">}</span>

<span class="cm">/* for all `F` that provide an `Fx` extension define a program function */</span>
<span class="k">fun</span> <span class="p">&lt;</span><span class="nc">F</span><span class="p">&gt;</span> <span class="nf">Fx</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;.</span><span class="n">program</span><span class="p">():</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">Int</span><span class="p">&gt;</span> <span class="p">=</span>
  <span class="n">fx</span> <span class="p">{</span> <span class="p">!</span><span class="n">effect</span> <span class="p">{</span> <span class="n">sideEffect</span><span class="p">()</span> <span class="p">}</span> <span class="p">}</span>

<span class="cm">/* for all `F` that provide an `UnsafeRun` extension define a main function */</span>
<span class="k">fun</span> <span class="p">&lt;</span><span class="nc">F</span><span class="p">&gt;</span> <span class="nf">UnsafeRun</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;.</span><span class="n">main</span><span class="p">(</span><span class="nv">fx</span><span class="p">:</span> <span class="nc">Fx</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">&gt;):</span> <span class="nc">Int</span> <span class="p">=</span>
  <span class="n">unsafe</span> <span class="p">{</span> <span class="n">runBlocking</span> <span class="p">{</span> <span class="n">fx</span><span class="p">.</span><span class="n">program</span><span class="p">()</span> <span class="p">}</span> <span class="p">}</span>

<span class="cm">/* Run program in the IO monad */</span>
<span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="nv">args</span><span class="p">:</span> <span class="nc">Array</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="n">IO</span><span class="p">.</span><span class="n">unsafeRun</span><span class="p">().</span><span class="n">main</span><span class="p">(</span><span class="n">IO</span><span class="p">.</span><span class="n">fx</span><span class="p">())</span>
<span class="p">}</span>
<span class="c1">//sampleEnd</span>
</code></pre></div></div>

<p>Polymorphism is important for two main reasons: <em>Correctness</em> &amp; <em>Flexibility</em>.</p>

<p>Polymorphic programs are more likely to be correct because the APIs available to them are constrained by the functionality described in the type classes that are used as a scope. In the previous example, this is the receiver of the function.
What&rsquo;s most amazing about this technique is that, as we declare our programs, only data types that can provide extensions for <code class="highlighter-rouge">Fx</code> and <code class="highlighter-rouge">UnsafeRun</code> are able to be provided as arguments to the final <code class="highlighter-rouge">main</code>.
You will not be able to compile this program unless your data type supports those extensions.</p>

<p>Polymorphic programs are more flexible than their concrete counterparts because they can run unmodified in multiple runtimes.
In the same fashion that <code class="highlighter-rouge">main</code> is concrete in the previous example to <code class="highlighter-rouge">IO</code>, we could have used Rx2 Observables, Reactor Flux, or any other data type that is able to provide extensions for <code class="highlighter-rouge">Fx</code> and <code class="highlighter-rouge">UnsafeRun</code> instead.
See <a href="https://github.com/arrow-kt/arrow/issues/1281">Issue 1281</a> which tracks support for those frameworks or reach out to us if you are interested in support for any other framework.</p>

<h2 id="fx-for-all-data-types">Fx for all data types</h2>

<p>Fx is not restricted to data types that support concurrency like <code class="highlighter-rouge">IO</code>. Other data types can utilize versions of the <code class="highlighter-rouge">Fx</code> DSL with reduced powers based on the level of constrains that they can provide extensions for.</p>

<p>The Arrow library already provides the ability to compute imperatively over all monads and brings first-class do-notation / comprehensions with an extremely elegant syntax thanks to Kotlin&rsquo;s operator overloading features and suspension system. The following examples demonstrate the use of effect binding with two of the many options of data types in which <code class="highlighter-rouge">Fx</code> programs can compile to.</p>

<p data-executable="true"><em>Fx over <code class="highlighter-rouge">Option</code></em></p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">arrow.effects.IO</span>
<span class="k">import</span> <span class="nn">arrow.core.Option</span>
<span class="k">import</span> <span class="nn">arrow.core.extensions.option.fx.fx</span>

<span class="c1">//sampleStart</span>
<span class="kd">val</span> <span class="py">result</span> <span class="p">=</span> <span class="n">fx</span> <span class="p">{</span>
  <span class="kd">val</span> <span class="p">(</span><span class="py">one</span><span class="p">)</span> <span class="p">=</span> <span class="n">Option</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
  <span class="kd">val</span> <span class="p">(</span><span class="py">two</span><span class="p">)</span> <span class="p">=</span> <span class="n">Option</span><span class="p">(</span><span class="n">one</span> <span class="p">+</span> <span class="n">one</span><span class="p">)</span>
  <span class="n">two</span>
<span class="p">}</span>
<span class="c1">//sampleEnd</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">println</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p data-executable="true"><em>Fx over <code class="highlighter-rouge">Try</code></em></p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">arrow.core.Try</span>
<span class="k">import</span> <span class="nn">arrow.core.extensions.`try`.fx.fx</span>

<span class="c1">//sampleStart</span>
<span class="kd">val</span> <span class="py">result</span> <span class="p">=</span> 
  <span class="n">fx</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="p">(</span><span class="py">one</span><span class="p">)</span> <span class="p">=</span> <span class="n">Try</span> <span class="p">{</span> <span class="m">1</span> <span class="p">}</span>
    <span class="kd">val</span> <span class="p">(</span><span class="py">two</span><span class="p">)</span> <span class="p">=</span> <span class="n">Try</span> <span class="p">{</span> <span class="n">one</span> <span class="p">+</span> <span class="n">one</span> <span class="p">}</span>
    <span class="n">two</span>
  <span class="p">}</span>
<span class="c1">//sampleEnd</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">println</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The <code class="highlighter-rouge">component1</code> operator over all <code class="highlighter-rouge">Kind&lt;F, A&gt;</code> is able to obtain a non-blocking <code class="highlighter-rouge">A</code> bound in the LHS in the same way <code class="highlighter-rouge">!</code> does.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">suspend</span> <span class="k">fun</span> <span class="p">&lt;</span><span class="nc">A</span><span class="p">&gt;</span> <span class="nf">Kind</span><span class="p">&lt;</span><span class="n">F</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;.</span><span class="n">bind</span><span class="p">():</span> <span class="nc">A</span>
<span class="n">suspend</span> <span class="k">operator</span> <span class="k">fun</span> <span class="p">&lt;</span><span class="nc">A</span><span class="p">&gt;</span> <span class="nf">Kind</span><span class="p">&lt;</span><span class="n">F</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;.</span><span class="n">component1</span><span class="p">():</span> <span class="nc">A</span> <span class="p">=</span> <span class="n">bind</span><span class="p">()</span>
<span class="n">suspend</span> <span class="k">operator</span> <span class="k">fun</span> <span class="p">&lt;</span><span class="nc">A</span><span class="p">&gt;</span> <span class="nf">Kind</span><span class="p">&lt;</span><span class="n">F</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;.</span><span class="n">not</span><span class="p">():</span> <span class="nc">A</span> <span class="p">=</span> <span class="n">bind</span><span class="p">()</span>
</code></pre></div></div>

<p>The result destructures syntax for all monadic expressions by receiving the value bound in the left-hand side in a non-blocking fashion.</p>

<h2 id="arrow-fx-vs-tagless-final">Arrow Fx vs Tagless Final</h2>

<p>Arrow Fx eliminates the need for tagless style algebras and parametrization over expressions that require <code class="highlighter-rouge">F</code> as a type parameter when invoking functions.</p>

<p>When modeling effects as <code class="highlighter-rouge">suspend</code>, functions that are disallowed to compile in the pure environment but welcome in compositional blocks denoted as <code class="highlighter-rouge">effect { sideEffect() }</code>.</p>

<p>Arrow Fx brings first class, no-compromises, direct style syntax for effectful programs that are constrained by monads that can provide an extension of <code class="highlighter-rouge">Concurrent&lt;F&gt;</code>.
 It models effects with the Kotlin Compiler&rsquo;s native system support for <code class="highlighter-rouge">suspend</code> functions and the ability to declare restricted suspended blocks with <code class="highlighter-rouge">@RestrictsSuspension</code> in which effects are allowed to run and compose.</p>

<p>We still preserve <code class="highlighter-rouge">F</code> to achieve polymorphism, but its usage is restricted to type declarations and unnecessary in program composition.</p>

<p>As a consequence of the assimilation and elimination of the <code class="highlighter-rouge">F</code> type parameter from the syntax in such programs, the entire hierarchy of type class combinators we find in <code class="highlighter-rouge">Functor</code>, <code class="highlighter-rouge">Applicative</code>, and <code class="highlighter-rouge">Monad</code> disappear and what they model is swallowed as syntax that operates directly over the environment.</p>

<p>This simplification is manifested in the world of suspended effects in the fact that all values of type <code class="highlighter-rouge">Kind&lt;F, A&gt;</code> can bind to <code class="highlighter-rouge">A</code> in the left-hand side in a non-blocking fashion because Kotlin supports imperative CPS and continuation styles syntactically.
Arrow Fx uses the Kotlin compiler native support for implicit CPS to achieve direct syntax for effectful monads.</p>

<p>This has a tremendous impact on program declaration since all the functional combinators can be easily applied with <code class="highlighter-rouge">!</code> to obtain a non blocking value, where before you had <code class="highlighter-rouge">Kind,F, A&gt;</code> as a return type.
<code class="highlighter-rouge">map</code> and <code class="highlighter-rouge">flatMap</code> are no longer necessary because their returned values are flattened and automatically bound in the monad context when you use <code class="highlighter-rouge">!</code>.</p>

<p>This leads us to the realization that there is a direct relationship between <code class="highlighter-rouge">suspend () -&gt; A</code> and <code class="highlighter-rouge">Kind&lt;F, A&gt;</code>, or, what <code class="highlighter-rouge">F[A]</code> is in Scala.
This relationship establishes that a <code class="highlighter-rouge">suspend</code> function denoting an effect can be deferred and controlled by the monadic context of a suspend capable data type.</p>

<p><code class="highlighter-rouge">effect</code> takes us, without blocking semantics, from a suspended function to any <code class="highlighter-rouge">Kind&lt;F, A&gt;</code>.
This includes IO and pretty much everything you are using today in a tagless final or IO wrapping style.</p>

<p>This relationship also eliminates the need for using any of the functional combinators you find in the <code class="highlighter-rouge">Functor&lt;F&gt;</code> hierarchy for effectful monads.
These are all swallowed by equivalent direct syntax in the environment as demonstrated in the examples below:</p>

<h3 id="good-bye-functor-applicative-and-monad">Good bye <code class="highlighter-rouge">Functor</code>, <code class="highlighter-rouge">Applicative</code> and <code class="highlighter-rouge">Monad</code></h3>

<p><code class="highlighter-rouge">Arrow Fx</code> removes the need to use the functional combinators found in the Functor, Applicative, and Monad type classes.</p>

<p>These combinators are instead represented as direct syntax and compile-time and guaranteed by the Kotlin compiler that effectful computations denoted by the user can&rsquo;t run uncontrolled in functions denoted as pure.</p>

<p>The following combinators illustrate how the Functor hierarchy functions are pointless in the environment given we can declare programs that respect the same semantics thanks to the Kotlin suspension system. Below, we&rsquo;ll see examples of a few of the most well-known combinators that will disappear from your day-to-day FP programming and what they look like in Arrow Fx:</p>

<table>
  <thead>
    <tr>
      <th>TypeClass</th>
      <th>Wrapped</th>
      <th>Fx</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Functor.map</td>
      <td><code class="highlighter-rouge">just(1).map { it + 1 }</code></td>
      <td><code class="highlighter-rouge">1 + 1</code></td>
    </tr>
    <tr>
      <td>Applicative.just</td>
      <td><code class="highlighter-rouge">just(1)</code></td>
      <td><code class="highlighter-rouge">1</code></td>
    </tr>
    <tr>
      <td>Applicative.mapN</td>
      <td><code class="highlighter-rouge">mapN(just(1), just(2), ::Tuple2)</code></td>
      <td><code class="highlighter-rouge">1 toT 2</code></td>
    </tr>
    <tr>
      <td>Applicative.tupled</td>
      <td><code class="highlighter-rouge">tupled(just(1), just(2))</code></td>
      <td><code class="highlighter-rouge">1 toT 2</code></td>
    </tr>
    <tr>
      <td>Monad.flatMap</td>
      <td><code class="highlighter-rouge">IO.just(1).flatMap { n -&gt; IO { n + 1 } }</code></td>
      <td><code class="highlighter-rouge">1 + 1</code></td>
    </tr>
    <tr>
      <td>Monad.flatten</td>
      <td><code class="highlighter-rouge">IO.just(IO.just(1))}.flatten()</code></td>
      <td><code class="highlighter-rouge">1</code></td>
    </tr>
    <tr>
      <td>MonadDefer.delay</td>
      <td><code class="highlighter-rouge">IO.delay { 1 }</code></td>
      <td><code class="highlighter-rouge">effect { 1 }</code></td>
    </tr>
    <tr>
      <td>MonadDefer.defer</td>
      <td><code class="highlighter-rouge">IO.defer { IO { 1 } }</code></td>
      <td><code class="highlighter-rouge">effect { 1 }</code></td>
    </tr>
  </tbody>
</table>

<p>This is, in general, true for effectful data types that are commutative.</p>

<h3 id="non-commutative-monads">Non-commutative monads</h3>

<p>Note that implicit CPS style with non-blocking direct binding has a disadvantage. You cannot apply substitution based on referential transparency for non-commutative monads where the order of effects matter.</p>

<p>Arrow Fx is aware of this but still allows users to use <code class="highlighter-rouge">fx</code> on non-commutative monads such as <code class="highlighter-rouge">List</code>, providing safe <code class="highlighter-rouge">fx</code> builders that guarantee suspended effects are applied in order in different arguments before they are composed.
Altering the order of effects when using the safe builders for non-commutative monads does not alter the results because it enforces effect order prior to composition.</p>

<div data-executable="true" class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">arrow.core.identity</span>
<span class="k">import</span> <span class="nn">arrow.core.toT</span>
<span class="k">import</span> <span class="nn">arrow.data.extensions.list.fx.fx</span>

<span class="c1">//sampleStart</span>
<span class="kd">val</span> <span class="py">result1</span> <span class="p">=</span> <span class="n">fx</span><span class="p">(</span><span class="n">listOf</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">),</span> <span class="n">listOf</span><span class="p">(</span><span class="k">true</span><span class="p">,</span> <span class="k">false</span><span class="p">),</span> <span class="o">::</span><span class="n">identity</span><span class="p">)</span>
<span class="kd">val</span> <span class="py">result2</span> <span class="p">=</span> <span class="n">fx</span><span class="p">(</span><span class="n">listOf</span><span class="p">(</span><span class="k">true</span><span class="p">,</span> <span class="k">false</span><span class="p">),</span> <span class="n">listOf</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">),</span> <span class="o">::</span><span class="n">identity</span><span class="p">)</span>
<span class="c1">//sampleEnd</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">println</span><span class="p">(</span><span class="n">result1</span><span class="p">)</span>
  <span class="n">println</span><span class="p">(</span><span class="n">result2</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Arrow identifies non-blocking binding in these non-commutative monads as unsafe and as an effect worth tracking!
For consistency, if you want to shoot yourself in the foot, performing free environmental effect application for these non-commutative types requires the user to give explicit permission to activate the unsafe <code class="highlighter-rouge">fx</code> block.</p>

<div data-executable="true" class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">arrow.core.toT</span>
<span class="k">import</span> <span class="nn">arrow.data.extensions.list.fx.fx</span>
<span class="k">import</span> <span class="nn">arrow.data.k</span>
<span class="k">import</span> <span class="nn">arrow.unsafe</span>

<span class="c1">//sampleStart</span>
<span class="kd">val</span> <span class="py">result1</span> <span class="p">=</span> <span class="n">unsafe</span> <span class="p">{</span>
  <span class="n">fx</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">a</span> <span class="p">=</span> <span class="p">!</span><span class="n">listOf</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">).</span><span class="n">k</span><span class="p">()</span>
    <span class="kd">val</span> <span class="py">b</span> <span class="p">=</span> <span class="p">!</span><span class="n">listOf</span><span class="p">(</span><span class="k">true</span><span class="p">,</span> <span class="k">false</span><span class="p">).</span><span class="n">k</span><span class="p">()</span>
    <span class="n">a</span> <span class="n">toT</span> <span class="n">b</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">val</span> <span class="py">result2</span> <span class="p">=</span> <span class="n">unsafe</span> <span class="p">{</span> 
  <span class="n">fx</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">b</span> <span class="p">=</span> <span class="p">!</span><span class="n">listOf</span><span class="p">(</span><span class="k">true</span><span class="p">,</span> <span class="k">false</span><span class="p">).</span><span class="n">k</span><span class="p">()</span>
    <span class="p">!</span><span class="n">listOf</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">).</span><span class="n">k</span><span class="p">()</span> <span class="n">toT</span> <span class="n">b</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="c1">//sampleEnd</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">println</span><span class="p">(</span><span class="n">result1</span><span class="p">)</span>
  <span class="n">println</span><span class="p">(</span><span class="n">result2</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The previous program shows how applying substitution alters the order of effects and affects the outcome.</p>

<p>The same program expressed in a commutative monad which is the case of <code class="highlighter-rouge">IO</code>, shows how both programs yield the same deterministic result even after changing the order of effects:</p>

<div data-executable="true" class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">arrow.effects.IO</span>
<span class="k">import</span> <span class="nn">arrow.unsafe</span>
<span class="k">import</span> <span class="nn">arrow.effects.extensions.io.unsafeRun.runBlocking</span>
<span class="k">import</span> <span class="nn">arrow.effects.extensions.io.fx.fx</span>
<span class="k">import</span> <span class="nn">arrow.core.toT</span>

<span class="c1">//sampleStart</span>
<span class="kd">val</span> <span class="py">result1</span> <span class="p">=</span>
  <span class="n">fx</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">a</span> <span class="p">=</span> <span class="p">!</span><span class="n">effect</span> <span class="p">{</span> <span class="m">1</span> <span class="p">}</span>
    <span class="kd">val</span> <span class="py">b</span> <span class="p">=</span> <span class="p">!</span><span class="n">effect</span> <span class="p">{</span> <span class="m">2</span> <span class="p">}</span>
    <span class="n">a</span> <span class="n">toT</span> <span class="n">b</span>
  <span class="p">}</span>

<span class="kd">val</span> <span class="py">result2</span> <span class="p">=</span>
  <span class="n">fx</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">b</span> <span class="p">=</span> <span class="p">!</span><span class="n">effect</span> <span class="p">{</span> <span class="m">2</span> <span class="p">}</span>
    <span class="p">!</span><span class="n">effect</span> <span class="p">{</span> <span class="m">1</span> <span class="p">}</span> <span class="n">toT</span> <span class="n">b</span>
  <span class="p">}</span>
<span class="c1">//sampleEnd</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">println</span><span class="p">(</span><span class="n">result1</span><span class="p">)</span>
  <span class="n">println</span><span class="p">(</span><span class="n">result2</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

    </div>
</div>

</div>
<!-- Jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!-- Arrow playground -->
<script src="https://unpkg.com/arrow-playground@1" data-selector="[class^=&#39;language-kotlin&#39;]"></script>
<!-- Highlight -->
<script src="../../../../js/highlight.pack.js"></script>
<script>
  hljs.initHighlighting();
</script>
<!-- Docsearch -->
<script type="text/javascript" src="../../../../js/docsearch.min.js"></script>
<!-- Custom scripts for this template -->
<script src="../../../../js/functions.js"></script>
<!-- Gitter -->
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'arrow-kt/Lobby'
  };

</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script>



</body></html>