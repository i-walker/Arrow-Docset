<!DOCTYPE html>
<html>




<head>
    <meta charset="UTF-8">
    <title>Arrow</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Functional companion to Kotlin's Standard Library">
    <meta name="keywords" content="functional-programming, kotlin-library, monads, monad-transformers, functional-data-structure, kotlin, fp-types, adt, free-monads, tagless-final, mtl, for-comprehension, category-theory">

    <meta property="og:image" content="http://arrow-kt.io/img/poster.png"/>
    <meta property="og:title" content="Arrow"/>
    <meta property="og:site_name" content="Arrow"/>
    <meta property="og:url" content="http://arrow-kt.io/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:description" content="Functional companion to Kotlin's Standard Library"/>
    <meta property="og:keywords" content="functional-programming, kotlin-library, monads, monad-transformers, functional-data-structure, kotlin, fp-types, adt, free-monads, tagless-final, mtl, for-comprehension, category-theory"/>

    <meta name="twitter:text:description" content="Functional companion to Kotlin's Standard Library"/>
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@arrow_kt">
    <meta name="twitter:creator" content="@arrow_kt">
    <meta name="twitter:image" content="http://arrow-kt.io/img/twitter-card.png"/>

    <!-- Arrow versions metadata -->
    <meta name="previous-version" data-title="" data-url="" />
    <meta name="stable-version" data-title="" data-url="" />
    <meta name="next-version" data-title="" data-url="" />

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet"
          type="text/css">
    <!-- Animated -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <!-- Arrow main css -->
    <link rel="shortcut icon" href="../../../img/favicon.png">
    <!-- highlight  css -->
    <link rel="stylesheet" type="text/css" href="../../../css/highlight/atom-one-light.css">
    <!-- Arrow main css -->
    <link rel="stylesheet" type="text/css" href="../../../css/arrow.css">

    <!-- Code to manage version information -->
    <script src="../../../js/docVersions.js" defer></script>

    <!-- Diagrams support -->
    <script src="../../../js/dagre.min.js"></script>
    <script src="../../../js/lodash.min.js"></script>
    <script src="../../../js/nomnoml.js"></script>
    <script src="../../../js/diagrams.js" async></script>

    
        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-18433785-18"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-18433785-18');
</script>

    
</head>

<body id="doc-body">
<div id="wrapper">
    <div id="sidebar-wrapper">
    <div class="sidebar-brand">
        <a class="brand" href="https://next.arrow-kt.io/">
            <img src="../../../img/arrow-brand-sidebar.svg" alt="">
            <span>Λrrow</span>
        </a>
        <button type="button" id="main-toggle" class="sidebar-toggle">
            <span class="close"></span>
        </button>
    </div>

    <ul class="sidebar-nav sidebar-doc-versions">
  <li class="sidebar-nav-item">
    <a href="index.html#">
      <span>Arrow version</span>
      <span id="arrow-version"></span>
    </a>
    <ul>
      <li>
        <a href="https://arrow-kt.io/docs/">
          <span>
            v0.9.0 - STABLE
          </span>
        </a>
      </li>

      <li>
        <a href="../../index.html">
            <span>
              v0.9.1 - NEXT
            </span>
        </a>
      </li>

      <li>
        <a href="https://0-8-2.arrow-kt.io/docs/">
            <span>
              v0.8.2 -
              PREVIOUS
            </span>
        </a>
      </li>

      
        
      
        
      
        
      
    </ul>
  </li>
</ul>


    <ul class="sidebar-nav">
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Quick Start</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../index.html">
                        <i class="fa fa-circle"></i>
                        <span>Index</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../quickstart/libraries/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Libraries</span>
                    </a>
                </li>
                
                <li>
                    <a href="https://next.arrow-kt.io/blog/">
                        <i class="fa fa-circle"></i>
                        <span>Blogs & Presentations</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../quickstart/projects/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Projects & Examples</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Arrow Fx</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../effects/fx/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Getting Started</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../effects/fx/async/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Asynchronous & Concurrent Programming</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../effects/fx/polymorphism/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Polymorphism. One Program multiple runtimes</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>API Docs</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../apidocs/arrow-typeclasses/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Type Classes</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-core-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Core Data Types</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-core-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Core Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-extras/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Core Extra Data Types</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-extras-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Core Extra Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-effects-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-effects-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-effects-kotlinx-coroutines-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Coroutines</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-effects-kotlinx-coroutines-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Coroutines Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-effects-rx2-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Rx2</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-effects-rx2-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Rx2 Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-effects-reactor-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Reactor</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-effects-reactor-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Reactor Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-streams/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Streams</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-mtl/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MTL</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-optics/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Optics</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-recursion-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Recursion</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-recursion-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Recursion Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-generic/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Generic</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-free-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Free</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-validation/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Validation</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Patterns</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="index.html">
                        <i class="fa fa-circle"></i>
                        <span>Glossary</span>
                    </a>
                </li>
                
                <li>
                    <a href="../error_handling/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Error Handling</span>
                    </a>
                </li>
                
                <li>
                    <a href="../dependency_injection/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Dependency Injection</span>
                    </a>
                </li>
                
                <li>
                    <a href="../monads/index.html">
                        <i class="fa fa-circle"></i>
                        <span>The Monad Tutorial</span>
                    </a>
                </li>
                
                <li>
                    <a href="../monad_comprehensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Monad Comprehensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../polymorphic_programs/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Polymorphic Programs</span>
                    </a>
                </li>
                
                <li>
                    <a href="../free_algebras/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Free Algebras</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Data Types</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../datatypes/intro/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Intro</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../datatypes/basic/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Basic Types</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/core/option/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Option</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/core/either/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Either</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/core/try/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Try</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/validated/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Validated</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/nonemptylist/index.html">
                        <i class="fa fa-circle"></i>
                        <span>NonEmptyList</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/listk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>ListK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/sequencek/index.html">
                        <i class="fa fa-circle"></i>
                        <span>SequenceK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/setk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>SetK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/mapk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MapK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/sortedmapk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>SortedMapK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/ior/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Ior</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/core/id/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Id</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/reader/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Reader</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/kleisli/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Kleisli</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/state/index.html">
                        <i class="fa fa-circle"></i>
                        <span>State</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/statet/index.html">
                        <i class="fa fa-circle"></i>
                        <span>StateT</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/store/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Store</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/moore/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Moore</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/sum/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Sum</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/day/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Day</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/writert/index.html">
                        <i class="fa fa-circle"></i>
                        <span>WriterT</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/free/trampoline/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Trampoline</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/coproduct/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Coproduct</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/core/eval/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Eval</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/optiont/index.html">
                        <i class="fa fa-circle"></i>
                        <span>OptionT</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/data/eithert/index.html">
                        <i class="fa fa-circle"></i>
                        <span>EitherT</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/core/function0/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Function0</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/core/function1/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Function1</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/const/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Const</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Type Classes</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../typeclasses/intro/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Intro</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/show/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Show</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/eq/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Eq</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/hash/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Hash</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/order/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Order</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/semigroup/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Semigroup</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-typeclasses/arrow.typeclasses/-semigroupal/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Semigroupal</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-typeclasses/arrow.typeclasses/-monoidal/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Monoidal</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/monoid/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Monoid</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-typeclasses/arrow.typeclasses/-semiring/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Semiring</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/foldable/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Foldable</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/bifoldable/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Bifoldable</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/traverse/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Traverse</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/reducible/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Reducible</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/mtl/typeclasses/traversefilter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>TraverseFilter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/functor/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Functor</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/mtl/typeclasses/functorfilter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>FunctorFilter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/applicative/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Applicative</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/applicativeerror/index.html">
                        <i class="fa fa-circle"></i>
                        <span>ApplicativeError</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/selective/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Selective</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/monad/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Monad</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/monaderror/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadError</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/effects/typeclasses/bracket/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Bracket</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/mtl/typeclasses/monadfilter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadFilter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/mtl/typeclasses/monadreader/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadReader</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/mtl/typeclasses/monadwriter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadWriter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/mtl/typeclasses/monadstate/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadState</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/mtl/typeclasses/monadcombine/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadCombine</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/comonad/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Comonad</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/bimonad/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Bimonad</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/bifunctor/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Bifunctor</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/profunctor/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Profunctor</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/semigroupk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>SemigroupK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/monoidk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonoidK</span>
                    </a>
                </li>
                
                <li>
                    <a href="https://next.arrow-kt.io/docs/typeclasses/inject/">
                        <i class="fa fa-circle"></i>
                        <span>Inject</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/alternative/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Alternative</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/divide/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Divide</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/divisible/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Divisible</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../arrow/typeclasses/decidable/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Decidable</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Effects</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../effects/io/index.html">
                        <i class="fa fa-circle"></i>
                        <span>IO</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../effects/monaddefer/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadDefer</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../effects/async/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Async</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../effects/effect/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effect</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../effects/promise/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Promise</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../effects/ref/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Ref</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../effects/fiber/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Fiber</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../apidocs/arrow-effects-data/arrow.effects/-resource/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Resource</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Optics</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../optics/dsl/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Optics DSL</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../optics/iso/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Iso</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../optics/lens/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Lens</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../optics/optional/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Optional</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../optics/prism/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Prism</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../optics/getter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Getter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../optics/setter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Setter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../optics/fold/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Fold</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../optics/traversal/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Traversal</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../optics/cons/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Cons</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../optics/snoc/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Snoc</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../optics/at/index.html">
                        <i class="fa fa-circle"></i>
                        <span>At</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../optics/index/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Index</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../optics/filterindex/index.html">
                        <i class="fa fa-circle"></i>
                        <span>FilterIndex</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../optics/each/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Each</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Λrrow Query Language</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../aql/intro/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Λrrow Query Language</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../aql/select/index.html">
                        <i class="fa fa-circle"></i>
                        <span>select</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../aql/from/index.html">
                        <i class="fa fa-circle"></i>
                        <span>from</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../aql/where/index.html">
                        <i class="fa fa-circle"></i>
                        <span>where</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../aql/groupby/index.html">
                        <i class="fa fa-circle"></i>
                        <span>groupBy</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../aql/orderby/index.html">
                        <i class="fa fa-circle"></i>
                        <span>orderBy</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../aql/sum/index.html">
                        <i class="fa fa-circle"></i>
                        <span>sum</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../aql/union/index.html">
                        <i class="fa fa-circle"></i>
                        <span>union</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../aql/custom/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Custom Data Types</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Generic</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../generic/coproduct/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Coproduct</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../generic/product/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Product</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Integrations</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../integrations/rx2/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Rx2</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../integrations/reactor/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Reactor</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../integrations/kotlinxcoroutines/index.html">
                        <i class="fa fa-circle"></i>
                        <span>kotlinx.coroutines</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../integrations/retrofit/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Retrofit</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../integrations/kindedj/index.html">
                        <i class="fa fa-circle"></i>
                        <span>KindedJ</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Free</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../free/free/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Free</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../free/freeapplicative/index.html">
                        <i class="fa fa-circle"></i>
                        <span>FreeApplicative</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../free/cofree/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Cofree</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../free/yoneda/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Yoneda</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../free/coyoneda/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Coyoneda</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Recursion Schemes</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../recursion/intro/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Intro</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../recursion/recursive/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Recursive</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../recursion/corecursive/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Corecursive</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../recursion/birecursive/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Birecursive</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../recursion/mu/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Mu</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../recursion/nu/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Nu</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../recursion/fix/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Fix</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Legal</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../legal/credits/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Credits</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../legal/licenses/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Licenses</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
    </ul>

</div>

    <div id="doc-wrapper">
    <div class="doc-header">
        <button type="button" id="main-toggle" class="sidebar-toggle">
            <i class="fa fa-lg fa-bars menu-icon"></i>
        </button>
        <div class="search-wrapper">
          <input id="docsearch" class="search" placeholder="Search documentation..." type="search">
        </div>
        <a target="_blank"
          href="https://github.com/arrow-kt/arrow/edit/master/modules/docs/arrow-docs/docs/docs/patterns/glossary/README.md">
          <i class="fa fa-pencil"></i>
            Edit
        </a>
    </div>
    <div class="doc-content">
        
        <h2 id="functional-programming-glossary">Functional Programming Glossary</h2>

<p class="beginner">beginner</p>

<p>Note: This section keeps on growing! Keep an eye on it from time to time.</p>

<p>This document is meant to be an introduction to Functional Programming for people from all backgrounds.
We’ll go through some of the key concepts and then dive into their implementation and use in real world cases.</p>

<p>Some similar documents, focused on explaining general concepts rather than Arrow’s versions,
can be found for examples <a href="https://github.com/hemanth/functional-programming-jargon">in JavaScript</a> and <a href="https://gist.github.com/jdegoes/97459c0045f373f4eaf126998d8f65dc">in Scala</a>.</p>

<h3 id="datatypes">Datatypes</h3>

<p>A datatype is a class that encapsulates one reusable coding pattern.
These solutions have a canonical implementation that is generalised for all possible uses.</p>

<p>Some common patterns expressed as datatypes are absence handling with <a href="https://next.arrow-kt.io/docs/arrow/core/option"><code class="highlighter-rouge">Option</code></a>,
branching in code with <a href="https://next.arrow-kt.io/docs/arrow/core/either"><code class="highlighter-rouge">Either</code></a>,
catching exceptions with <a href="https://next.arrow-kt.io/docs/arrow/core/try"><code class="highlighter-rouge">Try</code></a>,
or interacting with the platform the program runs in using <a href="https://next.arrow-kt.io/docs/effects/io"><code class="highlighter-rouge">IO</code></a>.</p>

<p>Some of these patterns are implemented using a mix of <code class="highlighter-rouge">sealed</code> classes where each inheritor is a <code class="highlighter-rouge">data</code> class.
For example, the internal representation of an <code class="highlighter-rouge">Option</code> is a <code class="highlighter-rouge">sealed</code> class with two <code class="highlighter-rouge">data</code> classes <code class="highlighter-rouge">Some&lt;A&gt;(val a: A)</code> and <code class="highlighter-rouge">None</code>,
and <code class="highlighter-rouge">Ior</code> is a <code class="highlighter-rouge">sealed</code> class with three <code class="highlighter-rouge">data</code> class inheritors, <code class="highlighter-rouge">Left(val a: A)</code>, <code class="highlighter-rouge">Right(val b: B)</code>, and <code class="highlighter-rouge">Both(val a: A, val b: B)</code>.</p>

<p>Datatypes that express patterns like deferred evaluation can do it by nesting themselves with every operation they chain. One example is <code class="highlighter-rouge">IO</code>.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">arrow.effects.*</span>

<span class="n">IO</span> <span class="p">{</span> <span class="m">0</span> <span class="p">}</span>
 <span class="p">.</span><span class="n">flatMap</span> <span class="p">{</span> <span class="n">IO</span> <span class="p">{</span> <span class="n">it</span> <span class="p">*</span> <span class="m">2</span> <span class="p">}</span> <span class="p">}</span>
 <span class="p">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">it</span> <span class="p">+</span> <span class="m">1</span> <span class="p">}</span>
<span class="c1">// Map(source=Bind(cont=Suspend(thunk=() -&gt; arrow.effects.IO.Pure&lt;A&gt;), g=(A) -&gt; arrow.effects.IO&lt;B&gt;), g=(kotlin.Int) -&gt; kotlin.Int, index=0)</span>
</code></pre></div></div>

<p>You can read more about all the <a href="https://next.arrow-kt.io/docs/datatypes/intro">datatypes</a> that Arrow provides in its <a href="https://next.arrow-kt.io/docs/datatypes/intro">section of the docs</a>.</p>

<h3 id="typeclasses">Typeclasses</h3>

<p>Typeclasses are interface abstractions that define a set of extension functions associated to one type.
These extension functions are canonical and consistent across languages and libraries;
and they have inherent mathematical properties that are testable, such as commutativity or associativity.</p>

<p>Examples of behaviours abstracted by typeclasses are: comparability (<a href="https://next.arrow-kt.io/docs/arrow/typeclasses/eq"><code class="highlighter-rouge">Eq</code></a>),
composability (<a href="https://next.arrow-kt.io/docs/arrow/typeclasses/monoid"><code class="highlighter-rouge">Monoid</code></a>),
its contents can be mapped from one type to another (<a href="https://next.arrow-kt.io/docs/arrow/typeclasses/functor"><code class="highlighter-rouge">Functor</code></a>),
or error recovery (<a href="https://next.arrow-kt.io/docs/arrow/typeclasses/monaderror"><code class="highlighter-rouge">MonadError</code></a>).</p>

<p>Typeclasses have two main uses:</p>

<ul>
  <li>
    <p>Add new functionality to types. For example, if I know how to compare two objects I can add a new extension function to check for inequality.
Or if I know how to aggregate objects together, I can add an extension function for <code class="highlighter-rouge">List</code> that aggregates all of its elements.
The number of extra extension functions that you get per typeclass can be from one in <code class="highlighter-rouge">Eq</code> to 17 (!) in <code class="highlighter-rouge">Foldable</code>.</p>
  </li>
  <li>
    <p>Abstracting over behavior. Like any other interface, you can use them in your functions and classes as a way of talking about the capabilities of the implementation,
without exposing the details. This way you can create APIs that work the same for <code class="highlighter-rouge">Option</code>, <code class="highlighter-rouge">Try</code>, or <code class="highlighter-rouge">Observable</code>.</p>
  </li>
</ul>

<p>You can read more about all the <a href="https://next.arrow-kt.io/docs/typeclasses/intro">typeclasses</a> that Arrow provides in its <a href="https://next.arrow-kt.io/docs/typeclasses/intro">section of the docs</a>.</p>

<p>Let’s dive in one example. The typeclass <code class="highlighter-rouge">Eq</code> parametrized to <code class="highlighter-rouge">F</code> defines equality between two objects of type <code class="highlighter-rouge">F</code>:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">interface</span> <span class="nc">Eq</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="k">fun</span> <span class="nc">F</span><span class="p">.</span><span class="nf">eqv</span><span class="p">(</span><span class="nv">b</span><span class="p">:</span> <span class="nc">F</span><span class="p">):</span> <span class="nc">Boolean</span>

  <span class="k">fun</span> <span class="nc">F</span><span class="p">.</span><span class="nf">neqv</span><span class="p">(</span><span class="nv">b</span><span class="p">:</span> <span class="nc">F</span><span class="p">):</span> <span class="nc">Boolean</span> <span class="p">=</span>
    <span class="p">!</span><span class="n">eqv</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="instances-and-extensions-interfaces">Instances and Extensions Interfaces</h3>

<p>A single implementation of a typeclass for a specific datatype or class.
Because typeclasses require generic parameters each implementation is meant to be unique for that parameter.</p>

<p>For example, given a class like this:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">data class</span> <span class="nc">User</span><span class="p">(</span><span class="kd">val</span> <span class="py">id</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">companion</span> <span class="k">object</span>
<span class="p">}</span>
</code></pre></div></div>

<p>We can declare that instances of this class can be equated based on their <code class="highlighter-rouge">id</code> property, and therefore that <code class="highlighter-rouge">User</code> itself is an instance of the <code class="highlighter-rouge">Eq</code> typeclass:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">arrow.extension</span>

<span class="nd">@extension</span>
<span class="kd">interface</span> <span class="nc">UserEq</span><span class="p">:</span> <span class="n">Eq</span><span class="p">&lt;</span><span class="n">User</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="k">override</span> <span class="k">fun</span> <span class="nc">User</span><span class="p">.</span><span class="nf">eqv</span><span class="p">(</span><span class="nv">b</span><span class="p">:</span> <span class="nc">User</span><span class="p">):</span> <span class="nc">Boolean</span> <span class="p">=</span> <span class="n">id</span> <span class="p">==</span> <span class="n">b</span><span class="p">.</span><span class="n">id</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Note that classes must have companion objects for this to work. All typeclass instances provided by Arrow can be found in the companion object of the type they’re defined for, including platform types like String or Int.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">arrow.*</span>
<span class="k">import</span> <span class="nn">arrow.core.*</span>
<span class="k">import</span> <span class="nn">arrow.data.*</span>
<span class="k">import</span> <span class="nn">arrow.core.extensions.*</span>
<span class="k">import</span> <span class="nn">arrow.data.extensions.*</span>
<span class="k">import</span> <span class="nn">arrow.typeclasses.*</span>
<span class="k">import</span> <span class="nn">arrow.core.extensions.option.functor.*</span>
<span class="k">import</span> <span class="nn">arrow.core.extensions.either.monadError.*</span>
<span class="k">import</span> <span class="nn">arrow.data.extensions.listk.traverse.*</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">String</span><span class="p">.</span><span class="n">eq</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">Option</span><span class="p">.</span><span class="n">functor</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">arrow.data.extensions.mapk.semigroup.*</span>

<span class="n">MapK</span><span class="p">.</span><span class="n">semigroup</span><span class="p">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Int</span><span class="p">&gt;(</span><span class="n">Int</span><span class="p">.</span><span class="n">semigroup</span><span class="p">())</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">Either</span><span class="p">.</span><span class="n">monadError</span><span class="p">&lt;</span><span class="n">Throwable</span><span class="p">&gt;()</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">ListK</span><span class="p">.</span><span class="n">traverse</span><span class="p">()</span>
</code></pre></div></div>

<p>If you’re defining your own instances and would like for them to be discoverable in their corresponding datatypes’ companion object, you can generate it by annotating them as <code class="highlighter-rouge">@extension</code>, and Arrow’s <a href="https://github.com/arrow-kt/arrow#additional-setup">annotation processor</a> will create the extension functions for you.</p>

<p>NOTE: If you’d like to use <code class="highlighter-rouge">@extension</code> for transitive typeclasses, like a <code class="highlighter-rouge">Show&lt;List&lt;A&gt;&gt;</code> that requires a function returning a <code class="highlighter-rouge">Show&lt;A&gt;</code>, you’ll need for the function providing the transitive typeclass to have 0 parameters. This will make the transitive typeclass a parameter of the extension function.</p>

<h3 id="syntax">Syntax</h3>

<p>When creating an instance with the <code class="highlighter-rouge">@extension</code> annotation, the processor generates extension functions for the type that are available simply by importing them. See for example the coroutine function <code class="highlighter-rouge">binding</code>, the constructor <code class="highlighter-rouge">map</code>, and the method <code class="highlighter-rouge">sequence</code> defined in the instances of <code class="highlighter-rouge">Monad</code>, <code class="highlighter-rouge">Applicative</code> and <code class="highlighter-rouge">Traverse</code>:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">arrow.core.Option</span>
<span class="k">import</span> <span class="nn">arrow.core.extensions.option.monad.binding</span>

<span class="n">binding</span> <span class="p">{</span>
  <span class="kd">val</span> <span class="p">(</span><span class="py">a</span><span class="p">)</span> <span class="p">=</span> <span class="n">Option</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
  <span class="kd">val</span> <span class="p">(</span><span class="py">b</span><span class="p">)</span> <span class="p">=</span> <span class="n">Option</span><span class="p">(</span><span class="n">a</span> <span class="p">+</span> <span class="m">1</span><span class="p">)</span>
  <span class="n">a</span> <span class="p">+</span> <span class="n">b</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">arrow.core.extensions.option.applicative.map</span>

<span class="n">map</span><span class="p">(</span><span class="n">Option</span><span class="p">(</span><span class="m">1</span><span class="p">),</span> <span class="n">Option</span><span class="p">(</span><span class="m">2</span><span class="p">),</span> <span class="n">Option</span><span class="p">(</span><span class="m">3</span><span class="p">))</span> <span class="p">{</span> <span class="p">(</span><span class="n">one</span><span class="p">,</span> <span class="n">two</span><span class="p">,</span> <span class="n">three</span><span class="p">)</span> <span class="p">-&gt;</span>
  <span class="n">one</span> <span class="p">+</span> <span class="n">two</span> <span class="p">+</span> <span class="n">three</span>
<span class="p">}</span>
<span class="c1">// Some(6)</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">arrow.data.extensions.list.traverse.sequence</span>
<span class="k">import</span> <span class="nn">arrow.core.extensions.option.applicative.applicative</span>

<span class="n">listOf</span><span class="p">(</span><span class="n">Option</span><span class="p">(</span><span class="m">1</span><span class="p">),</span> <span class="n">Option</span><span class="p">(</span><span class="m">2</span><span class="p">),</span> <span class="n">Option</span><span class="p">(</span><span class="m">3</span><span class="p">)).</span><span class="n">sequence</span><span class="p">(</span><span class="n">Option</span><span class="p">.</span><span class="n">applicative</span><span class="p">())</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">arrow.core.extensions.`try`.monad.binding</span>

<span class="n">binding</span> <span class="p">{</span>
  <span class="kd">val</span> <span class="p">(</span><span class="py">a</span><span class="p">)</span> <span class="p">=</span> <span class="n">Try</span> <span class="p">{</span> <span class="m">1</span> <span class="p">}</span>
  <span class="kd">val</span> <span class="p">(</span><span class="py">b</span><span class="p">)</span> <span class="p">=</span> <span class="n">Try</span> <span class="p">{</span> <span class="n">a</span> <span class="p">+</span> <span class="m">1</span> <span class="p">}</span>
  <span class="n">a</span> <span class="p">+</span> <span class="n">b</span>
<span class="p">}</span>
<span class="c1">// Success(value=3)</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">arrow.core.extensions.`try`.applicative.map</span>

<span class="n">map</span><span class="p">(</span><span class="n">Try</span> <span class="p">{</span> <span class="m">1</span> <span class="p">},</span> <span class="n">Try</span> <span class="p">{</span> <span class="m">2</span> <span class="p">},</span> <span class="n">Try</span> <span class="p">{</span> <span class="m">3</span> <span class="p">})</span> <span class="p">{</span> <span class="p">(</span><span class="n">one</span><span class="p">,</span> <span class="n">two</span><span class="p">,</span> <span class="n">three</span><span class="p">)</span> <span class="p">-&gt;</span>
  <span class="n">one</span> <span class="p">+</span> <span class="n">two</span> <span class="p">+</span> <span class="n">three</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">arrow.data.extensions.list.traverse.sequence</span>
<span class="k">import</span> <span class="nn">arrow.core.extensions.either.applicative.applicative</span>

<span class="n">listOf</span><span class="p">(</span><span class="n">Right</span><span class="p">(</span><span class="m">1</span><span class="p">),</span> <span class="n">Right</span><span class="p">(</span><span class="m">2</span><span class="p">),</span> <span class="n">Right</span><span class="p">(</span><span class="m">3</span><span class="p">)).</span><span class="n">sequence</span><span class="p">(</span><span class="n">Either</span><span class="p">.</span><span class="n">applicative</span><span class="p">&lt;</span><span class="n">Throwable</span><span class="p">&gt;())</span>
</code></pre></div></div>

<h3 id="type-constructors">Type constructors</h3>

<blockquote>
  <p>NOTE: This approach to type constructors will be simplified if <a href="https://github.com/Kotlin/KEEP/pull/87">KEEP-87</a> is approved. Go vote!</p>
</blockquote>

<p>A type constructor is any class or interface that has at least one generic parameter. For example,
<a href="https://next.arrow-kt.io/docs/arrow/data/listk"><code class="highlighter-rouge">ListK&lt;A&gt;</code></a> or <a href="https://next.arrow-kt.io/docs/arrow/core/option"><code class="highlighter-rouge">Option&lt;A&gt;</code></a>.
They’re called constructors because they’re similar to a factory function where the parameter is <code class="highlighter-rouge">A</code>, except type constructors work only for types.
So, we could say that after applying the parameter <code class="highlighter-rouge">Int</code> to the type constructor <code class="highlighter-rouge">ListK&lt;A&gt;</code> it returns a <code class="highlighter-rouge">ListK&lt;Int&gt;</code>.
As <code class="highlighter-rouge">ListK&lt;Int&gt;</code> isn’t parametrized in any generic value it is not considered a type constructor anymore, just a regular type.</p>

<p>Like functions, a type constructor with several parameters like <a href="https://next.arrow-kt.io/docs/arrow/core/either"><code class="highlighter-rouge">Either&lt;L, R&gt;</code></a> can be partially applied for one of them to return another type constructor with one fewer parameter.
For example, applying <code class="highlighter-rouge">Throwable</code> to the left side yields <code class="highlighter-rouge">Either&lt;Throwable, A&gt;</code>, or applying <code class="highlighter-rouge">String</code> to the right side results in <code class="highlighter-rouge">Either&lt;E, String&gt;</code>.</p>

<p>Type constructors are useful when matched with typeclasses because they help us represent instances of parametrized classes — the containers — that work for all generic parameters — the content.
As type constructors is not a first class feature in Kotlin, Λrrow uses an interface <code class="highlighter-rouge">Kind&lt;F, A&gt;</code> to represent them.
Kind stands for Higher Kind, which is the name of the language feature that allows working directly with type constructors.</p>

<h4 id="higher-kinds">Higher Kinds</h4>

<p>In a Higher Kind with the shape <code class="highlighter-rouge">Kind&lt;F, A&gt;</code>, if <code class="highlighter-rouge">A</code> is the type of the content then <code class="highlighter-rouge">F</code> has to be the type of the container.</p>

<p>A malformed Higher Kind would use the whole type constructor to define the container, duplicating the type of the content <del><code class="highlighter-rouge">Kind&lt;Option&lt;A&gt;, A&gt;</code></del>.
This incorrect representation has large a number of issues when working with partially applied types and nested types.</p>

<p>What Λrrow does instead is define a surrogate type that’s not parametrized to represent <code class="highlighter-rouge">F</code>.
These types are named same as the container and prefixed by For-, as in <code class="highlighter-rouge">ForOption</code> or <code class="highlighter-rouge">ForListK</code>.
You have seen these types used in the Syntax section above!</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">class</span> <span class="nc">ForOption</span> <span class="k">private</span> <span class="k">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="k">companion</span> <span class="k">object</span> <span class="p">{}</span> <span class="p">}</span>

<span class="k">sealed</span> <span class="kd">class</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;:</span> <span class="n">Kind</span><span class="p">&lt;</span><span class="n">ForOption</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">class</span> <span class="nc">ForListK</span> <span class="k">private</span> <span class="k">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="k">companion</span> <span class="k">object</span> <span class="p">{}</span> <span class="p">}</span>

<span class="kd">data class</span> <span class="nc">ListK</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;(</span><span class="kd">val</span> <span class="py">list</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;):</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">ForListK</span><span class="p">,</span> <span class="nc">A</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>As <code class="highlighter-rouge">ListK&lt;A&gt;</code> is the only existing implementation of <code class="highlighter-rouge">Kind&lt;ForListK, A&gt;</code>, we can define an extension function on <code class="highlighter-rouge">Kind&lt;ForListK, A&gt;</code> to do the downcasting safely for us.
This function by convention is called <code class="highlighter-rouge">fix()</code>, as in, fixing a type from something generic into concrete.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">fun</span> <span class="p">&lt;</span><span class="nc">A</span><span class="p">&gt;</span> <span class="nf">Kind</span><span class="p">&lt;</span><span class="n">ForListK</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;.</span><span class="n">fix</span><span class="p">()</span> <span class="p">=</span> <span class="k">this</span> <span class="k">as</span> <span class="n">ListK</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>This way we can convert from <code class="highlighter-rouge">ListK&lt;A&gt;</code> to <code class="highlighter-rouge">Kind&lt;ForListK, A&gt;</code> via simple subclassing and from <code class="highlighter-rouge">Kind&lt;ForListK, A&gt;</code> to <code class="highlighter-rouge">ListK&lt;A&gt;</code> using the function <code class="highlighter-rouge">fix()</code>.
Being able to define extension functions that work for partially applied generics is a feature from Kotlin that’s not available in Java.
You can define <code class="highlighter-rouge">fun Kind&lt;ForOption, A&gt;.fix()</code> and <code class="highlighter-rouge">fun Kind&lt;ForListK, A&gt;.fix()</code> and the compiler can smartly decide which one you’re trying to use.
If it can’t it means there’s an ambiguity you should fix!</p>

<p>The function <code class="highlighter-rouge">fix()</code> is already defined for all datatypes in Λrrow, alongside a typealias for its <code class="highlighter-rouge">Kind&lt;F, A&gt;</code> specialization done by suffixing the type with Of, as in <code class="highlighter-rouge">ListKOf&lt;A&gt;</code> or <code class="highlighter-rouge">OptionOf&lt;A&gt;</code>. If you’re creating your own datatype that’s also a type constructor and would like to create all these helper types and functions,
you can do so simply by annotating it as <code class="highlighter-rouge">@higherkind</code> and the Λrrow’s <a href="https://github.com/arrow-kt/arrow#additional-setup">annotation processor</a> will create them for you.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nd">@higherkind</span> <span class="kd">data class</span> <span class="nc">ListK</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;(</span><span class="kd">val</span> <span class="py">list</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;):</span> <span class="nc">ListKOf</span><span class="p">&lt;</span><span class="nc">A</span><span class="p">&gt;</span>

<span class="c1">// Generates the following code:</span>
<span class="c1">//</span>
<span class="c1">// class ForListK private constructor() { companion object {} }</span>
<span class="c1">// typealias ListKOf&lt;A&gt; = Kind&lt;ForListK, A&gt;</span>
<span class="c1">// fun ListKOf&lt;A&gt;.fix() = this as ListK&lt;A&gt;</span>
</code></pre></div></div>

<p>Note that the annotation <code class="highlighter-rouge">@higherkind</code> will also generate the integration typealiases required by <a href="https://next.arrow-kt.io/docs/integrations/kindedj">KindedJ</a> as long as the datatype is invariant. You can read more about sharing Higher Kinds and type constructors across JVM libraries in <a href="https://github.com/KindedJ/KindedJ#rationale">KindedJ’s README</a>.</p>

<h4 id="using-higher-kinds-with-typeclasses">Using Higher Kinds with typeclasses</h4>

<p>Now that we have a way of representing generic constructors for any type, we can write typeclasses that are parametrised for containers.</p>

<p>Let’s take as an example a typeclass that specifies how to map the contents of any container <code class="highlighter-rouge">F</code>. This typeclass that comes from computer science is called a <a href="https://next.arrow-kt.io/docs/arrow/typeclasses/functor"><code class="highlighter-rouge">Functor</code></a>.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">interface</span> <span class="nc">Functor</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="k">fun</span> <span class="p">&lt;</span><span class="nc">A</span><span class="p">,</span> <span class="nc">B</span><span class="p">&gt;</span> <span class="nf">Kind</span><span class="p">&lt;</span><span class="n">F</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;.</span><span class="n">map</span><span class="p">(</span><span class="n">f</span><span class="p">:</span> <span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">B</span><span class="p">):</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">B</span><span class="p">&gt;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>See how the class is parametrized on the container <code class="highlighter-rouge">F</code>, and the function is parametrized to the content <code class="highlighter-rouge">A</code>. This way we can have a single representation that works for all mappings from <code class="highlighter-rouge">A</code> to <code class="highlighter-rouge">B</code>.</p>

<p>Let’s define an instance of <code class="highlighter-rouge">Functor</code> for the datatype <code class="highlighter-rouge">ListK</code>, our own wrapper for lists.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@extension</span>
<span class="kd">interface</span> <span class="nc">ListKFunctor</span> <span class="p">:</span> <span class="n">Functor</span><span class="p">&lt;</span><span class="n">ForListK</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="k">override</span> <span class="k">fun</span> <span class="p">&lt;</span><span class="nc">A</span><span class="p">,</span> <span class="nc">B</span><span class="p">&gt;</span> <span class="nf">Kind</span><span class="p">&lt;</span><span class="n">ForListK</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;.</span><span class="n">map</span><span class="p">(</span><span class="n">f</span><span class="p">:</span> <span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">B</span><span class="p">):</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">ForListK</span><span class="p">,</span> <span class="nc">B</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="n">fix</span><span class="p">().</span><span class="n">map</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This interface extends <code class="highlighter-rouge">Functor</code> for the value <code class="highlighter-rouge">F</code> of <code class="highlighter-rouge">ListK</code>. We use an annotation processor <code class="highlighter-rouge">@extension</code> to generate an object out of an interface with all the default methods already defined, and to add an extension function to get it into the companion object of the datatype.
The <code class="highlighter-rouge">@extension</code> processor also projects all type class declared functions into the data type that it’s extending as extensions functions.
These extensions functions may be imported a la carte when working with concrete data types.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nd">@extension</span>
<span class="kd">interface</span> <span class="nc">ListKFunctor</span> <span class="p">:</span> <span class="n">Functor</span><span class="p">&lt;</span><span class="n">ForListK</span><span class="p">&gt;</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Somewhere else in the codebase</span>
<span class="n">ListK</span><span class="p">.</span><span class="n">functor</span><span class="p">()</span>
</code></pre></div></div>

<p>The signature of <code class="highlighter-rouge">map</code> once the types have been replaced takes a parameter <code class="highlighter-rouge">Kind&lt;ForListK, A&gt;</code>, which is the receiver, and a mapping function from <code class="highlighter-rouge">A</code> to <code class="highlighter-rouge">B</code>. This means that map will work for all instances of <code class="highlighter-rouge">ListK&lt;A&gt;</code> for whatever the value of <code class="highlighter-rouge">A</code> can be.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">override</span> <span class="k">fun</span> <span class="p">&lt;</span><span class="nc">A</span><span class="p">,</span> <span class="nc">B</span><span class="p">&gt;</span> <span class="nf">Kind</span><span class="p">&lt;</span><span class="n">ForListK</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;.</span><span class="n">map</span><span class="p">(</span><span class="n">f</span><span class="p">:</span> <span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">B</span><span class="p">):</span> <span class="nc">ListK</span><span class="p">&lt;</span><span class="nc">B</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>The implementation is short. On the first line we downcast <code class="highlighter-rouge">Kind&lt;ForListK, A&gt;</code> to <code class="highlighter-rouge">ListK&lt;A&gt;</code> using <code class="highlighter-rouge">fix()</code>. Once the value has been downcasted, the implementation of map inside the <code class="highlighter-rouge">ListK&lt;A&gt;</code> we have obtained already implements the expected behavior of map.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">list</span><span class="p">:</span> <span class="n">ListK</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">fix</span><span class="p">()</span>
<span class="k">return</span> <span class="n">list</span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="using-higher-kinds-and-typeclasses-with-functions">Using Higher Kinds and typeclasses with functions</h4>

<p>Higher kinds are also used to model functions that require for a datatype to implement a typeclass. This way you can create functions that abstract behavior (defined by a typeclass) and allow callers to define which datatype they’d like to apply it to.</p>

<p>Let’s use the typeclass <a href="https://next.arrow-kt.io/docs/arrow/typeclasses/applicative"><code class="highlighter-rouge">Applicative</code></a>, that contains the constructor function <code class="highlighter-rouge">just()</code>.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">interface</span> <span class="nc">Applicative</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;:</span> <span class="n">Functor</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;</span> <span class="p">{</span>

  <span class="c1">// Constructs the current datatype with a value of type A inside</span>
  <span class="k">fun</span> <span class="p">&lt;</span><span class="nc">A</span><span class="p">&gt;</span> <span class="nf">just</span><span class="p">(</span><span class="nv">a</span><span class="p">:</span> <span class="nc">A</span><span class="p">):</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">A</span><span class="p">&gt;</span>

<span class="p">}</span>
</code></pre></div></div>

<p>Once we have this typeclass behavior define we can now write a function that’s parametrized for any <code class="highlighter-rouge">F</code> that has one instance of <code class="highlighter-rouge">Applicative</code>. The function uses the constructor <code class="highlighter-rouge">just</code> to create a value of type <code class="highlighter-rouge">Kind&lt;F, User&gt;</code>, effectively generifying the return on any container <code class="highlighter-rouge">F</code>.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">fun</span> <span class="p">&lt;</span><span class="nc">F</span><span class="p">&gt;</span> <span class="nf">Applicative</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;.</span><span class="n">randomUserStructure</span><span class="p">(</span><span class="n">f</span><span class="p">:</span> <span class="p">(</span><span class="n">Int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">User</span><span class="p">):</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">User</span><span class="p">&gt;</span> <span class="p">=</span>
  <span class="k">this</span><span class="p">.</span><span class="n">just</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">Math</span><span class="p">.</span><span class="n">random</span><span class="p">().</span><span class="n">toInt</span><span class="p">()))</span>
</code></pre></div></div>

<p>Now lets create a simple example instance of <code class="highlighter-rouge">Applicative</code> where our <code class="highlighter-rouge">F</code> is <code class="highlighter-rouge">ListK</code>. This implementation of a <code class="highlighter-rouge">just</code> constructor is trivial for lists, as it just requires wrapping the value.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@extension</span>
<span class="kd">interface</span> <span class="nc">ListKApplicative</span> <span class="p">:</span> <span class="n">Applicative</span><span class="p">&lt;</span><span class="n">ForListK</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="k">override</span> <span class="k">fun</span> <span class="p">&lt;</span><span class="nc">A</span><span class="p">&gt;</span> <span class="nf">just</span><span class="p">(</span><span class="nv">a</span><span class="p">:</span> <span class="nc">A</span><span class="p">):</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">ForListK</span><span class="p">,</span> <span class="nc">A</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">ListK</span><span class="p">(</span><span class="n">listOf</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div></div>

<p>And now we can show how this function <code class="highlighter-rouge">randomUserStructure()</code> can be used for any datatype that implements <a href="https://next.arrow-kt.io/docs/arrow/typeclasses/applicative"><code class="highlighter-rouge">Applicative</code></a>. As the function returns a value <code class="highlighter-rouge">Kind&lt;F, User&gt;</code> the caller is responsible of calling <code class="highlighter-rouge">fix()</code> to downcast it to the expected value.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">list</span> <span class="p">=</span> <span class="n">ListK</span><span class="p">.</span><span class="n">applicative</span><span class="p">().</span><span class="n">randomUserStructure</span><span class="p">(</span><span class="o">::</span><span class="n">User</span><span class="p">).</span><span class="n">fix</span><span class="p">()</span>
<span class="c1">//[User(342)]</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">option</span> <span class="p">=</span> <span class="n">Option</span><span class="p">.</span><span class="n">applicative</span><span class="p">().</span><span class="n">randomUserStructure</span><span class="p">(</span><span class="o">::</span><span class="n">User</span><span class="p">).</span><span class="n">fix</span><span class="p">()</span>
<span class="c1">//Some(User(765))</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">either</span> <span class="p">=</span> <span class="n">Either</span><span class="p">.</span><span class="n">applicative</span><span class="p">&lt;</span><span class="n">Unit</span><span class="p">&gt;().</span><span class="n">randomUserStructure</span><span class="p">(</span><span class="o">::</span><span class="n">User</span><span class="p">).</span><span class="n">fix</span><span class="p">()</span>
<span class="c1">//Right(User(221))</span>
</code></pre></div></div>

<p>Passing the instance in every function call seems like a burden. So, because <code class="highlighter-rouge">randomUserStructure</code> is an extension function for <a href="https://next.arrow-kt.io/docs/arrow/typeclasses/applicative"><code class="highlighter-rouge">Applicative</code></a> we can omit the implicit parameter as long as we are within the scope of an Applicative instance. You can use the standard functions <code class="highlighter-rouge">with</code> and <code class="highlighter-rouge">run</code> for this.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">with</span> <span class="p">(</span><span class="n">ListK</span><span class="p">.</span><span class="n">applicative</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// Lots of Kotlin here</span>

    <span class="c1">// Multiple calls</span>

    <span class="n">randomUserStructure</span><span class="p">(</span><span class="o">::</span><span class="n">User</span><span class="p">).</span><span class="n">fix</span><span class="p">()</span>
<span class="p">}</span>
<span class="c1">// [User(342)]</span>
</code></pre></div></div>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Option</span><span class="p">.</span><span class="n">applicative</span><span class="p">().</span><span class="n">run</span> <span class="p">{</span>
    <span class="n">tupled</span><span class="p">(</span><span class="n">randomUserStructure</span><span class="p">(</span><span class="o">::</span><span class="n">User</span><span class="p">),</span> <span class="n">randomUserStructure</span><span class="p">(</span><span class="o">::</span><span class="n">User</span><span class="p">))</span>
<span class="p">}</span>
<span class="c1">// Some(value = Tuple2(a = User(765), b = User(127)))</span>
</code></pre></div></div>

<p>It is also possible to use a form of <a href="https://next.arrow-kt.io/docs/patterns/dependency_injection"><code class="highlighter-rouge">Dependency Injection</code></a> to make the typeclass scope available to a whole class. For example, using simple delegation:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">UserFetcher</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;(</span><span class="nv">AP</span><span class="p">:</span> <span class="nc">Applicative</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">&gt;):</span> <span class="nc">Applicative</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">&gt;</span> <span class="k">by</span> <span class="n">AP</span> <span class="p">{</span>
    <span class="k">fun</span> <span class="nf">genUser</span><span class="p">()</span> <span class="p">=</span> <span class="n">randomUserStructure</span><span class="p">(</span><span class="o">::</span><span class="n">User</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">UserFetcher</span><span class="p">(</span><span class="n">Option</span><span class="p">.</span><span class="n">applicative</span><span class="p">()).</span><span class="n">genUser</span><span class="p">().</span><span class="n">fix</span><span class="p">()</span>
<span class="c1">// Some(value = User(943))</span>
</code></pre></div></div>

<p>To learn more about this <code class="highlighter-rouge">Typeclassless</code> technique you should head to the <a href="https://next.arrow-kt.io/docs/patterns/dependency_injection"><code class="highlighter-rouge">Dependency Injection</code></a> documentation.</p>

<h3 id="side-effects-and-effects">Side-effects and Effects</h3>

<p>A side-effect is statement that changes something in the running environment. Generally this means setting a variable, displaying a value on screen, writing to a file or a database, logging, start a new thread…</p>

<p>When talking about side-effects, we generally see functions that have the signature <code class="highlighter-rouge">(...) -&gt; Unit</code>, meaning that unless the function doesn’t do anything, there’s at least one side-effect. Side-effects can also happen in the middle of another function, which is an undesirable behavior in Functional Programming.</p>

<p>Side-effects are too general to be unitested for because they depend on the environment. They also have poor composability. Overall, they’re considered to be outside the Functional Programming paradigm, and are often referred as “impure” functions.</p>

<p>Because side-effects are unavoidable in any program FP provides several datatypes for dealing with them! One way is by abstracting their behavior. The simplest examples of this are the <code class="highlighter-rouge">Writer</code>datatype, which allows you to write to an information sink like a log or a file buffer; or <code class="highlighter-rouge">State</code> datatype, which simulates scoped mutable state for the duration of an operation.</p>

<p>For more complicated side-effects that can throw or jump threads we need more advanced datatypes, called Effects, that wrap over impure operations. Some of these datatypes may be already familiar to you, like <a href="../../integrations/rx2/index.html"><code class="highlighter-rouge">rx.Observable</code></a>, <a href="../../integrations/kotlinxcoroutines/index.html"><code class="highlighter-rouge">kotlinx.coroutines.Deferred</code></a>, or Arrow’s <a href="../../effects/io/index.html"><code class="highlighter-rouge">IO</code></a>. These Effects compose, catch exceptions, control asynchrony, and most importantly can be run lazily. This gets rid of the issues with side-effects.</p>

<p>Although one can also write the whole program in an imperative way inside a single Effect wrapper that wouldn’t be very efficient as you don’t get any of its benefits :D</p>

    </div>
</div>

</div>
<!-- Jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!-- Arrow playground -->
<script src="https://unpkg.com/arrow-playground@1" data-selector="[class^='language-kotlin']"></script>
<!-- Highlight -->
<script src="../../../js/highlight.pack.js"></script>
<script>
  hljs.initHighlighting();
</script>
<!-- Docsearch -->
<script type="text/javascript" src="../../../js/docsearch.min.js"></script>
<!-- Custom scripts for this template -->
<script src="../../../js/functions.js"></script>
<!-- Gitter -->
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'arrow-kt/Lobby'
  };

</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

</body>
</html>
